generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Users \\
model User {
  id                    String       @id @default(uuid())
  email                 String?      @unique @db.VarChar(70)
  phone                 String?      @unique @db.VarChar(20)
  password              String?      @db.VarChar(100)
  lang                  Language     @default(AR)
  apple_id              String?
  birth_date            DateTime?
  created_at            DateTime?    @default(now())
  deleted_at            DateTime?
  fcm_token             String?
  full_name             String
  image_url             String?
  is_confirmed          Boolean?     @default(false)
  last_login_at         String?
  login_type            LoginType    @default(LOCAL)
  password_last_updated DateTime?
  role_id               String
  updated_at            DateTime?    @updatedAt
  is_active             Boolean?     @default(true)
  gender                Gender       @default(MALE)
  orders                Order[]
  requestedRefunds      Refund[]     @relation("RefundRequestedBy")
  reviewedRefunds       Refund[]     @relation("RefundReviewedBy")
  reviews               Review[]
  role                  UserRole     @relation(fields: [role_id], references: [id])
  UserVerify            UserVerify[]
  wallet                Wallet?
  customer              Customer? // <-- add this back-reference

  wishlist WishlistItem[]

  @@index([role_id], map: "user_role_id_fkey")
  @@map("user")
}

model UserRole {
  id          String    @id @default(uuid())
  name        String    @unique
  description String?
  created_at  DateTime  @default(now())
  updated_at  DateTime  @updatedAt
  deleted_at  DateTime?
  users       User[]

  @@map("user_role")
}

model UserVerify {
  id         Int      @id @default(autoincrement())
  user_id    String
  code       String   @unique
  phone      String?
  email      String?
  created_at DateTime @default(now())
  user       User     @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id], map: "UserVerify_user_id_fkey")
  @@map("user_verify")
}

model Customer {
  id       String @id
  type_id  Int?
  badge_id Int?
  class_id Int?
  user     User   @relation(fields: [id], references: [id], onDelete: Cascade)

  type                 CustomerType?                 @relation(fields: [type_id], references: [id])
  badge                CustomerBadge?                @relation(fields: [badge_id], references: [id])
  class                CustomerClass?                @relation(fields: [class_id], references: [id])
  addresses            CustomerAddress[]
  stats                CustomerStat?
  cart                 Cart?
  receiptConfirmations CustomerReceiptConfirmation[]

  @@map("customer")
}

model CustomerType {
  id          Int        @id @default(autoincrement())
  name        String     @unique @db.VarChar(191)
  description String?    @db.VarChar(191)
  created_at  DateTime   @default(now())
  updated_at  DateTime   @updatedAt
  deleted_at  DateTime?
  customers   Customer[]

  @@map("customer_type")
}

model CustomerAddress {
  id               Int       @id @default(autoincrement())
  customer_id      String
  name             String
  address          String?   @db.VarChar(191)
  is_default       Boolean   @default(false)
  city             String?   @db.VarChar(191)
  area_id          String?   @db.VarChar(191)
  country          String?   @default("Egypt") @db.VarChar(191)
  postal_code      String?   @db.VarChar(191)
  latitude         Decimal?  @db.Decimal(10, 8)
  longitude        Decimal?  @db.Decimal(11, 8)
  recipient_name   String?   @db.VarChar(191)
  recipient_phone  String?   @db.VarChar(191)
  notes            String?   @db.Text
  apartment_number String?
  building_number  String?
  floor_number     String?
  created_at       DateTime  @default(now())
  updated_at       DateTime  @updatedAt
  deleted_at       DateTime?
  customer         Customer  @relation(fields: [customer_id], references: [id])
  // deliveryAssignments OrderAssignment[] @relation("DeliveryAddress")
  orders           Order[]

  @@map("customer_address")
}

model CustomerStat {
  customer_id     String    @id
  last_order_date DateTime?
  total_spent     Decimal?
  total_orders    Int?
  created_at      DateTime  @default(now())
  updated_at      DateTime  @updatedAt
  customer        Customer  @relation(fields: [customer_id], references: [id])

  @@map("customer_stat")
}

model CustomerBadge {
  id             Int      @id @default(autoincrement())
  name           String   @unique
  name_ar        String   @unique
  min_amount     Float
  max_amount     Float
  ratio          Int
  description    String?  @db.Text
  description_ar String?  @db.Text
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt

  customers Customer[]
  offers    Offer[]
  ads       Ad[]

  @@map("customer_badge")
}

model CustomerClass {
  id          Int                @id @default(autoincrement())
  name        CustomerClassName?
  description String?            @db.Text
  created_at  DateTime           @default(now())
  updated_at  DateTime           @updatedAt

  customers Customer[]
  offers    Offer[]
  ads       Ad[]

  @@map("customer_class")
}

enum CustomerClassName {
  NEW
  REPEAT
  LOYAL
  LOST
}

model Cart {
  id          Int       @id @default(autoincrement())
  customer_id String    @unique
  total_price Decimal
  created_at  DateTime  @default(now())
  updated_at  DateTime  @updatedAt
  deleted_at  DateTime?
  customer    Customer  @relation(fields: [customer_id], references: [id], onDelete: Cascade)

  orders    Order[]
  cartItems CartItem[]

  @@map("cart")
}

model Offer {
  id                       Int       @id @default(autoincrement())
  product_id               String?
  target_customer_badge_id Int?
  offer_type               String?   @db.VarChar(191)
  offer_value              Decimal?
  start_date               DateTime? @db.Date
  end_date                 DateTime? @db.Date
  is_active                Boolean?  @default(true)
  synonyms                 String?   @db.VarChar(191)
  created_at               DateTime  @default(now())
  updated_at               DateTime  @updatedAt

  product           Product?       @relation(fields: [product_id], references: [id])
  customerBadge     CustomerBadge? @relation(fields: [target_customer_badge_id], references: [id])
  orderItems        OrderItem[]
  cartItems         CartItem[]
  customerClass     CustomerClass? @relation(fields: [customer_class_id], references: [id])
  customer_class_id Int?

  @@map("offer")
}

model CustomerReceiptConfirmation {
  id                    Int               @id @default(autoincrement())
  assignment_id         Int?
  customer_id           String?
  items_amount          Decimal?
  package_condition     PackageCondition?
  condition_notes       String?           @db.Text
  photos_url            String?           @db.VarChar(191)
  receipt_number        String?           @db.VarChar(191)
  otp_verified          Boolean?
  confirmed_at          DateTime?
  product_rating        Int?
  representative_rating Int?
  delivery_feedback     String?           @db.Text
  created_at            DateTime          @default(now())
  updated_at            DateTime          @updatedAt

  assignment OrderAssignment? @relation(fields: [assignment_id], references: [id])
  customer   Customer?        @relation(fields: [customer_id], references: [id])

  @@map("customer_receipt_confirmation")
}

model OrderAssignment {
  id                      Int       @id @default(autoincrement())
  order_id                Int?
  representative_id       String?
  // status                  AssignmentStatus?
  pickup_address_id       String?
  estimated_pickup_time   DateTime?
  actual_pickup_time      DateTime?
  delivery_address_id     String?
  estimated_delivery_time DateTime?
  actual_delivery_time    DateTime?
  failure_reason          String?   @db.VarChar(191)
  notes                   String?   @db.Text
  created_at              DateTime  @default(now())
  updated_at              DateTime  @updatedAt
  deleted_at              DateTime?

  order Order? @relation(fields: [order_id], references: [id])
  // representative  ShippingRepresentative? @relation(fields: [representative_id], references: [id])
  // pickupAddress   SupplierStoreAddress?   @relation("PickupAddress", fields: [pickup_address_id], references: [id])
  // deliveryAddress CustomerAddress? @relation("DeliveryAddress", fields: [delivery_address_id], references: [id])

  // handoverConfirmation SupplierHandoverConfirmation[]
  // pickupConfirmation   RepresentativePickupConfirmation[]
  // deliveryConfirmation RepresentativeDeliveryConfirmation[]
  // receiptConfirmation  CustomerReceiptConfirmation[]
  // issues               DeliveryIssue[]
  customerReceiptConfirmations CustomerReceiptConfirmation[]

  @@map("order_assignment")
}

enum PackageCondition {
  GOOD
  DAMAGED
  INCOMPLETE
}

model Wallet {
  id              Int       @id @default(autoincrement())
  points          Int       @default(0)
  user_id         String    @unique
  last_checked_at DateTime?
  created_at      DateTime  @default(now())
  updated_at      DateTime  @updatedAt
  total_spent     Float?    @default(0)
  user            User      @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@map("wallet")
}

model Faq {
  id         Int       @id @default(autoincrement())
  question   String
  answer     String
  language   Language? @default(EN)
  sort_id    Int       @default(0)
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
  is_active  Boolean   @default(true)

  @@index([sort_id])
  @@map("faq")
}

model Category {
  id                 Int             @id @default(autoincrement())
  name               String          @unique
  slug               String?         @unique
  name_ar            String?
  description        String?         @db.LongText
  description_ar     String?         @db.LongText
  image_url          String?
  icon_url           String?
  parent_id          Int?
  is_active          Boolean
  product_attributes Json?
  synonyms           String?         @db.VarChar(191)
  created_at         DateTime        @default(now())
  updated_at         DateTime        @updatedAt
  deleted_at         DateTime?
  sort_id            Int             @default(0)
  brands             BrandCategory[]
  parent             Category?       @relation("CategoryHierarchy", fields: [parent_id], references: [id])
  children           Category[]      @relation("CategoryHierarchy")
  products           Product[]

  @@index([sort_id], map: "categories_sortId_idx")
  @@index([parent_id])
  @@fulltext([name, name_ar, description, description_ar], map: "categories_name_nameAr_description_descriptionAr_idx")
  @@map("category")
}

model Brand {
  id   Int    @id @default(autoincrement())
  name String @unique
  slug String @unique

  name_ar   String?
  logo_url  String?
  cover_url String?

  is_active  Boolean @default(true)
  is_popular Boolean @default(false)

  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
  deleted_at DateTime?

  description    String? @db.LongText
  description_ar String? @db.LongText
  synonyms       String? @db.VarChar(191)

  up_to   Int?
  sort_id Int  @default(0)

  categories BrandCategory[]
  products   Product[]

  @@index([sort_id])
  @@fulltext([name, name_ar, synonyms, description, description_ar])
  @@map("brand")
}

model BrandCategory {
  id Int @id @default(autoincrement())

  brand_id    Int
  category_id Int
  created_at  DateTime @default(now())

  brand    Brand    @relation(fields: [brand_id], references: [id], onDelete: Cascade)
  category Category @relation(fields: [category_id], references: [id], onDelete: Cascade)

  @@unique([brand_id, category_id])
  @@index([category_id], map: "brand_categories_categoryId_fkey")
  @@map("brand_category")
}

model Product {
  id             String  @id @default(uuid())
  name           String
  name_ar        String?
  description    String? @db.LongText
  description_ar String? @db.LongText
  synonyms       String? @db.VarChar(191)
  slug           String? @unique

  price      Float?
  cost_price Float?
  stock      Int    @default(0)
  min_stock  Int    @default(5)

  sku         String  @unique
  barcode     String? @unique
  images      String? @db.LongText
  weight      Float?
  dimensions  String?
  is_active   Boolean @default(true)
  is_featured Boolean @default(false)
  offer       Float?
  category_id Int
  supplier_id String?
  brand_id    Int?

  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
  deleted_at DateTime?

  rating           Float?    @default(0)
  total_reviews    Int       @default(0)
  offer_valid_from DateTime?
  offer_valid_to   DateTime?

  is_best_seller Boolean @default(false)
  sort_id        Int     @default(0)

  // new fields
  color                            String?       @db.VarChar(191)
  min_discount_rate                Decimal?
  min_amount_for_one_user          Decimal?
  max_amount_for_one_user          Decimal?
  min_amount_for_one_order         Decimal?
  max_amount_for_one_order         Decimal?
  refundable                       Boolean?
  refundable_period                Decimal?
  refund_policy                    String?       @db.Text
  price_out_site                   Decimal?
  discount_type                    DiscountType?
  discount_value_total             Decimal?
  discount_value_part_for_customer Decimal?
  discount_value_part_for_company  Decimal?
  discount_value_part_for_offers   Decimal?
  reserved_in_carts_amount         Decimal?

  cartItems  CartItem[]
  orderItems OrderItem[]
  attributes ProductAttribute[]

  units    ProductUnit[]
  brand    Brand?        @relation(fields: [brand_id], references: [id])
  category Category      @relation(fields: [category_id], references: [id])
  supplier Supplier?     @relation(fields: [supplier_id], references: [id])

  reviews  Review[]
  wishlist WishlistItem[]
  offers   Offer[]

  @@index([sort_id])
  @@index([brand_id])
  @@index([category_id])
  @@index([supplier_id])
  @@fulltext([name, name_ar, description, description_ar])
  @@map("product")
}

enum DiscountType {
  PERCENT
  FIXED
}

model ProductAttribute {
  id         Int     @id @default(autoincrement())
  key        String
  value      String
  product_id String
  value_ar   String?
  product    Product @relation(fields: [product_id], references: [id], onDelete: Cascade)

  @@unique([product_id, key])
  @@index([product_id], map: "product_attribute_product_id_fkey")
  @@map("product_attribute")
}

model ProductUnit {
  id             Int        @id @default(autoincrement())
  product_id     String
  name           String     @db.VarChar(191)
  name_ar        String?    @db.VarChar(191)
  price          Decimal
  description    String?    @db.VarChar(191)
  description_ar String?    @db.VarChar(191)
  product        Product    @relation(fields: [product_id], references: [id])
  cartItems      CartItem[]

  @@map("product_unit")
}

model Supplier {
  id            String    @id @default(uuid())
  name          String
  nameAr        String?
  email         String?   @unique
  phone         String?
  address       String?
  city          String?
  governorate   String?
  contactPerson String?
  isActive      Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  products      Product[]

  @@map("suppliers")
}

model Order {
  id                Int               @id @default(autoincrement())
  orderNumber       String            @unique
  customerId        String
  totalAmount       Float
  shippingCost      Float             @default(0)
  discount          Float             @default(0)
  taxAmount         Float             @default(0)
  status            OrderStatus       @default(PENDING)
  paymentMethod     PaymentMethod     @default(CASH_ON_DELIVERY)
  paymentStatus     PaymentStatus     @default(PENDING)
  shippingAddress   String            @db.LongText
  notes             String?
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  paymentId         String?
  userAddressId     Int?
  refundedAmount    Float             @default(0)
  paymentAttempts   PaymentAttempt[]
  items             OrderItem[]
  customer          User              @relation(fields: [customerId], references: [id])
  refunds           Refund[]
  customerAddress   CustomerAddress?  @relation(fields: [customerAddressId], references: [id])
  customerAddressId Int?
  cart              Cart?             @relation(fields: [cartId], references: [id])
  cartId            Int?
  orderAssignments  OrderAssignment[]

  @@index([customerId], map: "orders_customerId_fkey")
  @@map("orders")
}

model PaymentAttempt {
  id          Int           @id @default(autoincrement())
  orderId     Int
  provider    String
  intentionId String?
  status      PaymentStatus @default(PENDING)
  rawResponse String?       @db.LongText
  createdAt   DateTime      @default(now())
  order       Order         @relation(fields: [orderId], references: [id])
  refunds     Refund[]

  @@index([orderId])
  @@index([intentionId])
}

model OrderItem {
  id          Int          @id @default(autoincrement())
  orderId     Int
  productId   String
  quantity    Int
  price       Float
  createdAt   DateTime     @default(now())
  order       Order        @relation(fields: [orderId], references: [id], onDelete: Cascade)
  product     Product      @relation(fields: [productId], references: [id])
  refundItems RefundItem[]
  offer       Offer?       @relation(fields: [offer_id], references: [id])
  offer_id    Int?

  @@index([orderId], map: "order_items_orderId_fkey")
  @@index([productId], map: "order_items_productId_fkey")
  @@map("order_items")
}

model Refund {
  id               Int             @id @default(autoincrement())
  orderId          Int
  paymentAttemptId Int?
  amount           Float
  currency         String          @default("EGP")
  reason           String?
  status           RefundStatus    @default(REQUESTED)
  provider         String?
  providerRefundId String?
  rawResponse      String?         @db.LongText
  requestedById    String?
  reviewedById     String?
  reviewedAt       DateTime?
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt
  items            RefundItem[]
  order            Order           @relation(fields: [orderId], references: [id])
  paymentAttempt   PaymentAttempt? @relation(fields: [paymentAttemptId], references: [id])
  requestedBy      User?           @relation("RefundRequestedBy", fields: [requestedById], references: [id])
  reviewedBy       User?           @relation("RefundReviewedBy", fields: [reviewedById], references: [id])

  @@index([orderId])
  @@index([providerRefundId])
  @@index([requestedById])
  @@index([reviewedById])
  @@index([paymentAttemptId], map: "refunds_paymentAttemptId_fkey")
  @@map("refunds")
}

model RefundItem {
  id          Int       @id @default(autoincrement())
  refundId    Int
  orderItemId Int
  quantity    Int
  amount      Float
  orderItem   OrderItem @relation(fields: [orderItemId], references: [id])
  refund      Refund    @relation(fields: [refundId], references: [id], onDelete: Cascade)

  @@unique([refundId, orderItemId])
  @@index([orderItemId], map: "refund_items_orderItemId_fkey")
  @@map("refund_items")
}

model CartItem {
  id         Int    @id @default(autoincrement())
  cart_id    Int
  product_id String
  unit_id    Int
  quantity   Int    @default(1)

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  cart    Cart        @relation(fields: [cart_id], references: [id], onDelete: Cascade)
  product Product     @relation(fields: [product_id], references: [id], onDelete: Cascade)
  unit    ProductUnit @relation(fields: [unit_id], references: [id])

  offer_id Int?
  offer    Offer? @relation(fields: [offer_id], references: [id])

  @@unique([cart_id, unit_id]) // âœ… unique per unit in the cart
  @@index([cart_id])
  @@index([product_id])
  @@index([unit_id])
  @@map("cart_item")
}

model Review {
  id        String       @id @default(uuid())
  userId    String
  productId String
  rating    Float
  comment   String?      @db.LongText
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  status    ReviewStatus @default(PENDING)
  product   Product      @relation(fields: [productId], references: [id], onDelete: Cascade)
  user      User         @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, productId])
  @@index([productId])
  @@index([userId])
  @@map("reviews")
}

model WishlistItem {
  id        String   @id @default(uuid())
  userId    String
  productId String
  createdAt DateTime @default(now())
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, productId])
  @@index([productId], map: "wishlist_items_productId_fkey")
  @@map("wishlist_items")
}

model Ad {
  id                       String       @id @default(uuid())
  ad_type                  AdType?
  source                   String?      @db.VarChar(191)
  budget                   Decimal?
  title                    String?      @db.Text
  title_ar                 String?      @db.Text
  description              String?      @db.Text
  description_ar           String?      @db.Text
  priority                 Int?
  status                   AdStatus?
  image_url                String?      @db.VarChar(191)
  target_url               String?      @db.VarChar(191)
  placement                AdPlacement?
  popup_size               PopupSize?
  closable                 Boolean?
  mobile_screen            String?      @db.Text
  start_date               DateTime?
  end_date                 DateTime?
  time_slots               Json?
  duration_seconds         Int?
  shown_seconds            Int?
  first_shown_at           DateTime?
  last_shown_at            DateTime?
  target_customer_badge_id Int?
  target_supplier_badge_id Int?
  sort_id                  Int?         @default(0)
  created_at               DateTime     @default(now())
  updated_at               DateTime     @updatedAt
  deleted_at               DateTime?

  customerBadge     CustomerBadge? @relation(fields: [target_customer_badge_id], references: [id])
  // supplierBadge SupplierBadge? @relation(fields: [target_supplier_badge_id], references: [id])
  customerClass     CustomerClass? @relation(fields: [customer_class_id], references: [id])
  customer_class_id Int?

  @@map("ad")
}

enum PopupSize {
  SMALL
  MEDIUM
  LARGE
}

enum AdType {
  EXTERNAL
  INTERNAL
}

enum AdStatus {
  DRAFT
  ACTIVE
  PAUSED
  EXPIRED
}

enum AdPlacement {
  TOP
  MIDDLE
  BOTTOM
}

model AboutApp {
  id                String   @id @default(uuid())
  terms             String?  @db.Text
  terms_ar          String?  @db.Text
  about             String?  @db.Text
  about_ar          String?  @db.Text
  privacy_policy    String?  @db.Text
  privacy_policy_ar String?  @db.Text
  mission           String?  @db.Text
  mission_ar        String?  @db.Text
  vision            String?  @db.Text
  vision_ar         String?  @db.Text
  digital_card      String?  @db.Text
  digital_card_ar   String?  @db.Text
  phone             String?  @db.VarChar(191)
  email             String?  @db.VarChar(191)
  facebook          String?  @db.VarChar(200)
  instagram         String?  @db.VarChar(200)
  linkedin          String?  @db.VarChar(200)
  pinterest         String?  @db.VarChar(200)
  reddit            String?  @db.VarChar(200)
  snapchat          String?  @db.VarChar(200)
  telegram          String?  @db.VarChar(200)
  tiktok            String?  @db.VarChar(200)
  twitter           String?  @db.VarChar(200)
  whatsapp          String?  @db.VarChar(200)
  youtube           String?  @db.VarChar(200)
  created_at        DateTime @default(now())
  updated_at        DateTime @updatedAt

  @@map("about_app")
}

model ApplicationSetting {
  id                                      String   @id
  number_of_products_on_homepage          Int      @default(3)
  number_of_categories_on_homepage        Int      @default(3)
  number_of_featured_products_on_homepage Int      @default(10)
  number_of_latest_offers_on_homepage     Int      @default(3)
  number_of_new_arrivals_on_homepage      Int      @default(3)
  number_of_ads_on_homepage               Int      @default(3)
  number_of_brands_on_homepage            Int      @default(3)
  vat                                     Float    @default(5)
  last_attempt                            DateTime @default(now())
  login_attempt_duration_minutes          Int?     @default(20) @db.SmallInt
  login_attempts                          Int?     @default(5) @db.SmallInt
  login_as_guest                          Boolean  @default(false)
  permanent_delete                        Boolean  @default(false)
  app_android_url                         String?
  app_android_version                     String?
  app_ios_url                             String?
  app_ios_version                         String?
  paymob_api_key                          String?  @db.LongText
  paymob_base_url                         String?
  paymob_payment_methods                  String?
  paymob_public_key                       String?
  paymob_secret_key                       String?
  payment_attempts                        Int?     @default(5) @db.SmallInt
  paymob_iframes                          String?

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("application_setting")
}

model OnBoarding {
  id          Int       @id @default(autoincrement())
  image_url   String?
  title       String
  title_ar    String?
  content     String?
  content_ar  String?
  subtitle    String?
  subtitle_ar String?
  sort_id     Int       @default(0)
  created_at  DateTime  @default(now())
  updated_at  DateTime  @updatedAt
  deleted_at  DateTime?

  @@index([sort_id])
  @@map("on_boarding")
}

model ContactUs {
  id         Int       @id @default(autoincrement())
  name       String
  email      String
  message    String    @db.Text
  response   String?   @db.Text
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
  read_at    DateTime?
  read       Boolean   @default(false)

  @@map("contact_us")
}

model Article {
  id           Int      @id @default(autoincrement())
  title        String   @db.VarChar(255)
  slug         String   @unique @db.VarChar(255)
  summary      String?  @db.VarChar(500)
  content      String   @db.Text
  cover_image  String?
  keywords     String?  @db.VarChar(255)
  published_at DateTime
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  author       String   @db.VarChar(255)
  is_active    Boolean  @default(true)

  sort_id Int @default(0)

  @@index([sort_id])
  @@map("article")
}

model Color {
  id   String @id
  name String @db.VarChar(100)
  code String @db.VarChar(7)

  @@map("Colors")
}

model Country {
  id        String   @id
  name      String   @db.VarChar(100)
  code      String   @db.VarChar(3)
  phoneCode String   @db.VarChar(5)
  regions   Region[]

  @@map("Countries")
}

model Region {
  id        Int             @id @default(autoincrement())
  name      String          @unique @db.VarChar(100)
  countryId String?
  country   Country?        @relation(fields: [countryId], references: [id], onDelete: Cascade)
  prices    ShippingPrice[]

  @@index([countryId], map: "Region_countryId_fkey")
  @@map("Regions")
}

model ShippingMethod {
  id        Int             @id @default(autoincrement())
  name      String          @unique @db.VarChar(100)
  createdAt DateTime        @default(now())
  updatedAt DateTime        @updatedAt
  prices    ShippingPrice[]
}

model ShippingPrice {
  id                    Int            @id @default(autoincrement())
  regionId              Int
  methodId              Int
  basePrice             Float
  additionalWeightPrice Float
  estimatedDeliveryDays Int
  createdAt             DateTime       @default(now())
  updatedAt             DateTime       @updatedAt
  method                ShippingMethod @relation(fields: [methodId], references: [id], onDelete: Cascade)
  region                Region         @relation(fields: [regionId], references: [id], onDelete: Cascade)

  @@unique([regionId, methodId])
  @@index([methodId], map: "ShippingPrices_methodId_fkey")
  @@map("ShippingPrices")
}

enum Gender {
  MALE
  FEMALE
}

enum OrderStatus {
  PENDING
  CONFIRMED
  PROCESSING
  SHIPPED
  DELIVERED
  CANCELLED
}

enum PaymentMethod {
  CREDIT_CARD
  PAYPAL
  BANK_TRANSFER
  CASH_ON_DELIVERY
}

enum PaymentStatus {
  PENDING
  PAID
  PARTIALLY_REFUNDED
  REFUNDED
  FAILED
}

enum RefundStatus {
  REQUESTED
  APPROVED
  REJECTED
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
}

enum Language {
  EN
  AR
}

enum LoginType {
  LOCAL
  GOOGLE
  FACEBOOK
  APPLE
}

enum ReviewStatus {
  PENDING
  APPROVED
  REJECTED
}

enum AdsPopupSize {
  Small
  Medium
  Large
}

enum AdsFrequency {
  Once
  Daily
  PerSession
}

enum AdsStatus {
  Active
  Inactive
}

enum AdsType {
  Home
  Popup
}

enum AdsPlacement {
  Top
  Middle
  Bottom
}
